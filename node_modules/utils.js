"use strict";

class Utils
{
  static createMessageList(session, text, extra)
  {
    return Object.assign(
      {
        chat_id: session.chatId
        , message_id: session.list.messageId
        , inline_message_id: session.list.inlineMessageId
        , text: text
        , parse_mode: "Markdown"
        , disable_web_page_preview: true
      }
      , extra);
  }

  static createSession(object)
    {
      let session = Object.create(null);

      session.chatId = object.chatId || null;

      session.action = object.action || null;

      session.list = object.list || { messageId: null, inlineMessageId: null };
      session.message = object.message || { callbackButtons: [] };
      session.masterMessage = object.masterMessage || { id: null, text: null };

      session.storage = Object.assign({}, object.storage);

      if (!session.storage[process.env.labelUncategorize])
      {
        session.storage[process.env.labelUncategorize] = Object.create(null);
      }

      return session;
    }

  static pairElements(array)
    {
      var pairs = [];

      array.forEach((entry) =>
        {
          if (pairs.length === 0 || pairs[pairs.length - 1].length === 2)
          {
            pairs[pairs.length] = [];
          }

          pairs[pairs.length - 1][pairs[pairs.length - 1].length] = entry;
        });

      return pairs;
    }
};

module.exports = Utils;
